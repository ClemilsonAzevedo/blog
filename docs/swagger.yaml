basePath: /api/v1
definitions:
  entities.Post:
    properties:
      content:
        type: string
      created_at:
        type: string
      dislikes:
        type: integer
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      likes:
        type: integer
      slug:
        type: string
      title:
        type: string
      user:
        $ref: '#/definitions/entities.User'
      user_id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      views:
        type: integer
    type: object
  entities.User:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      password:
        type: string
      role:
        enum:
        - anonymous
        - reader
        - author
        type: string
      username:
        type: string
    type: object
  request.AiPostCreate:
    properties:
      content:
        maxLength: 1000
        minLength: 2
        type: string
      userId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        minLength: 1
        type: string
    required:
    - content
    - userId
    type: object
  request.CommentCreate:
    properties:
      content:
        type: string
      postId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      userId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
    type: object
  request.CommentUpdate:
    properties:
      content:
        type: string
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      postId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      userId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
    type: object
  request.PostCreate:
    properties:
      content:
        maxLength: 1000
        minLength: 2
        type: string
      dislikes:
        minimum: 0
        type: integer
      likes:
        minimum: 0
        type: integer
      title:
        maxLength: 100
        minLength: 2
        type: string
      userId:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        minLength: 1
        type: string
    required:
    - content
    - dislikes
    - likes
    - title
    - userId
    type: object
  request.PostUpdate:
    properties:
      content:
        maxLength: 1000
        minLength: 2
        type: string
      dislikes:
        minimum: 0
        type: integer
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        minLength: 1
        type: string
      likes:
        minimum: 0
        type: integer
      title:
        maxLength: 100
        minLength: 2
        type: string
    required:
    - content
    - dislikes
    - id
    - likes
    - title
    type: object
  request.UserLogin:
    properties:
      email:
        type: string
      password:
        maxLength: 100
        minLength: 8
        type: string
    required:
    - email
    - password
    type: object
  request.UserRegister:
    properties:
      email:
        type: string
      password:
        maxLength: 100
        minLength: 8
        type: string
      role:
        enum:
        - anonymous
        - reader
        - author
        type: string
      username:
        maxLength: 100
        minLength: 2
        type: string
    required:
    - email
    - password
    - role
    - username
    type: object
  request.UserUpdate:
    properties:
      email:
        type: string
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        minLength: 1
        type: string
      role:
        enum:
        - anonymous
        - reader
        - author
        type: string
      username:
        maxLength: 100
        minLength: 2
        type: string
    required:
    - id
    - role
    type: object
  response.CommentResponse:
    properties:
      content:
        type: string
      created_at:
        type: string
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      post_id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      user_id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
    type: object
  response.PostResponse:
    properties:
      author_id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      content:
        type: string
      created_at:
        type: string
      dislikes:
        type: integer
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      likes:
        type: integer
      slug:
        type: string
      title:
        type: string
      updated_at:
        type: string
      views:
        type: integer
    type: object
  response.UserByID:
    properties:
      email:
        type: string
      id:
        example: 01ARZ3NDEKTSV4RRFFQ69G5FAV
        type: string
      role:
        enum:
        - anonymous
        - reader
        - author
        type: string
      username:
        type: string
    required:
    - role
    type: object
  response.UserLogout:
    properties:
      message:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@blog.io
    name: API Support
  description: REST API for a blog application with posts, comments, and user management.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Blog API
  version: "1.0"
paths:
  /comment:
    post:
      consumes:
      - application/json
      description: Creates a new comment on a post (authentication required)
      parameters:
      - description: Comment creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.CommentCreate'
      produces:
      - application/json
      responses:
        "201":
          description: Comment created
          schema:
            type: string
        "400":
          description: You need to provide all comments data
          schema:
            type: string
        "500":
          description: Cannot create comment
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Create a new comment
      tags:
      - Comments
  /comment/{id}:
    delete:
      description: Deletes an existing comment
      parameters:
      - description: Comment ULID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
          schema:
            type: string
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error deleting comment
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Delete a comment
      tags:
      - Comments
    put:
      consumes:
      - application/json
      description: Updates an existing comment
      parameters:
      - description: Comment ULID
        in: path
        name: id
        required: true
        type: string
      - description: Comment update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.CommentUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.CommentResponse'
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error updating comment
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Update a comment
      tags:
      - Comments
  /comments:
    get:
      description: Retrieves a single comment by its ULID (authentication required)
      parameters:
      - description: Comment ULID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.CommentResponse'
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error retrieving comment
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get comment by ID
      tags:
      - Comments
  /comments/{postID}:
    get:
      description: Retrieves all comments for a specific post
      parameters:
      - description: Post ULID
        in: path
        name: postID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.CommentResponse'
            type: array
        "400":
          description: Post ID is required
          schema:
            type: string
        "500":
          description: Error retrieving comments
          schema:
            type: string
      summary: Get comments by post ID
      tags:
      - Comments
  /comments/user/{userID}:
    get:
      description: Retrieves all comments made by a specific user
      parameters:
      - description: User ULID
        in: path
        name: userID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.CommentResponse'
            type: array
        "400":
          description: User ID is required
          schema:
            type: string
        "500":
          description: Error retrieving comments
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get comments by user ID
      tags:
      - Comments
  /login:
    post:
      consumes:
      - application/json
      description: Authenticates a user and sets a JWT token in an HTTP-only cookie
      parameters:
      - description: User login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UserLogin'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful - token set in cookie
          headers:
            Set-Cookie:
              description: token=<jwt>; Path=/; HttpOnly; SameSite=Lax
              type: string
          schema:
            type: string
        "400":
          description: Email or Password is incorrect
          schema:
            type: string
      summary: Login user
      tags:
      - Auth
  /logout:
    post:
      description: Clears the authentication cookie and logs out the user
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            $ref: '#/definitions/response.UserLogout'
      security:
      - CookieAuth: []
      summary: Logout user
      tags:
      - Auth
  /post:
    post:
      consumes:
      - application/json
      description: Creates a new blog post (Author role required)
      parameters:
      - description: Post creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.PostCreate'
      produces:
      - application/json
      responses:
        "201":
          description: Post created
          schema:
            type: string
        "400":
          description: You need set Content and AuthorId to create a post
          schema:
            type: string
        "500":
          description: Cannot create post
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Create a new post
      tags:
      - Posts
  /post-with-ai:
    post:
      consumes:
      - application/json
      description: Creates a new blog post with AI-generated title and hashtags from
        content (Author role required)
      parameters:
      - description: AI post creation data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.AiPostCreate'
      produces:
      - application/json
      responses:
        "201":
          description: Post created
          schema:
            type: string
        "400":
          description: You need set Content and AuthorId to create a post
          schema:
            type: string
        "500":
          description: Cannot create post
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Create a post with AI-generated title and hashtags
      tags:
      - Posts
      - AI
  /post/{id}:
    delete:
      description: Deletes an existing blog post (Author role required)
      parameters:
      - description: Post ULID
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
          schema:
            type: string
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error deleting post
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Delete a post
      tags:
      - Posts
    get:
      description: Retrieves a single post by its ULID
      parameters:
      - description: Post ULID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PostResponse'
        "400":
          description: Cannot parse Id of Post
          schema:
            type: string
        "500":
          description: Error retrieving post
          schema:
            type: string
      summary: Get post by ID
      tags:
      - Posts
    put:
      consumes:
      - application/json
      description: Updates an existing blog post (Author role required)
      parameters:
      - description: Post ULID
        in: path
        name: id
        required: true
        type: string
      - description: Post update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.PostUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PostResponse'
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error updating post
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Update a post
      tags:
      - Posts
  /post/{postID}/comments:
    get:
      description: Retrieves all comments for a specific post
      parameters:
      - description: Post ULID
        in: path
        name: postID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/response.CommentResponse'
            type: array
        "400":
          description: Post ID is required
          schema:
            type: string
        "500":
          description: Error retrieving comments
          schema:
            type: string
      summary: Get comments by post ID (alternative)
      tags:
      - Comments
  /post/slug/{slug}:
    get:
      description: Retrieves a single post by its URL slug
      parameters:
      - description: Post slug
        in: path
        name: slug
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.PostResponse'
        "400":
          description: Slug is required
          schema:
            type: string
        "500":
          description: Error retrieving post
          schema:
            type: string
      summary: Get post by slug
      tags:
      - Posts
  /posts:
    get:
      description: Retrieves a paginated list of blog posts
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        required: true
        type: integer
      - description: 'Number of posts per page (default: 10, max: 100)'
        in: query
        name: limit
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Returns data array and meta object with pagination info
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Limit is required
          schema:
            type: string
        "500":
          description: Error retrieving posts
          schema:
            type: string
      summary: Get paginated posts
      tags:
      - Posts
  /posts/all:
    get:
      description: Retrieves all blog posts
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/entities.Post'
            type: array
        "500":
          description: Error retrieving posts
          schema:
            type: string
      summary: Get all posts
      tags:
      - Posts
  /profile:
    delete:
      description: Deletes the currently authenticated user's account
      parameters:
      - description: User ULID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error deleting user
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Delete user profile
      tags:
      - Users
    get:
      description: Retrieves the profile of the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "401":
          description: unauthorized
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get current user profile
      tags:
      - Users
    put:
      consumes:
      - application/json
      description: Updates the currently authenticated user's profile
      parameters:
      - description: User ULID
        in: path
        name: id
        required: true
        type: string
      - description: User update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UserUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "400":
          description: Cannot Parse String to ULID
          schema:
            type: string
        "500":
          description: Error updating user
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Update user profile
      tags:
      - Users
  /register:
    post:
      consumes:
      - application/json
      description: Creates a new user account with the provided credentials
      parameters:
      - description: User registration data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/request.UserRegister'
      produces:
      - text/plain
      responses:
        "201":
          description: User Created has successfully
          schema:
            type: string
        "400":
          description: Password need 8 or more characters
          schema:
            type: string
        "409":
          description: User Already Exists
          schema:
            type: string
        "500":
          description: Cannot create user
          schema:
            type: string
      summary: Register a new user
      tags:
      - Auth
  /user:
    get:
      description: Retrieves a user by their email address
      parameters:
      - description: User email
        in: query
        name: email
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "400":
          description: Email is required
          schema:
            type: string
        "500":
          description: Error retrieving user
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get user by email
      tags:
      - Users
  /user/{id}:
    get:
      description: Retrieves a user by their ULID
      parameters:
      - description: User ULID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "400":
          description: ID is required
          schema:
            type: string
        "500":
          description: Error retrieving user
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get user by ID
      tags:
      - Users
  /user/name:
    get:
      description: Retrieves a user by their username
      parameters:
      - description: Username
        in: query
        name: name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.UserByID'
        "400":
          description: Name is required
          schema:
            type: string
        "500":
          description: Error retrieving user
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get user by name
      tags:
      - Users
  /users:
    get:
      description: Retrieves a list of all users (Author role required)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/entities.User'
            type: array
        "500":
          description: Error retrieving users
          schema:
            type: string
      security:
      - CookieAuth: []
      summary: Get all users
      tags:
      - Users
securityDefinitions:
  CookieAuth:
    in: cookie
    name: token
    type: apiKey
swagger: "2.0"
